{"version":3,"file":"icon.js","sources":["../../src/iconfont/icon.tsx"],"sourcesContent":["import {\n  computed, defineComponent, h, onMounted,\n} from 'vue';\n\nimport props from './props/props';\nimport useSizeProps from '../utils/use-size-props';\nimport ConfigContext from '../utils/config-context';\nimport { checkLinkAndLoad } from '../utils/check-url-and-load';\n\nimport '../style/css';\n\nconst { classPrefix } = ConfigContext;\n\nconst CDN_ICONFONT_URL = 'https://tdesign.gtimg.com/icon/0.1.3/fonts/index.css';\n\nexport const IconFont = defineComponent({\n  name: 'IconFont',\n  props,\n  setup(props, { attrs }) {\n    const propsSize = computed(() => props.size);\n\n    const { className: sizeClassName, style: sizeStyle } = useSizeProps(propsSize);\n\n    const name = computed(() => props.name || '');\n\n    const isBuiltinIcon = computed(() => props.url && /^t-icon-(\\w|-)+$/.test(props.name)); // 判断是否是渲染内置图标\n\n    const finalUrl = computed(() => {\n      let url = [];\n      url = props.url instanceof Array ? props.url.concat() : [props.url];\n      if (props.loadDefaultIcons) url.push(CDN_ICONFONT_URL);\n      return url;\n    });\n\n    const classNames = computed(() => [\n      {\n        [name.value]: props.url,\n        [`${classPrefix}-icon`]: !props.url || isBuiltinIcon.value,\n        [`${classPrefix}-icon-${name.value}`]: !props.url,\n      },\n      sizeClassName.value,\n    ]);\n\n    const finalStyle = computed(() => ({ ...sizeStyle.value, ...(attrs.style as Styles) }));\n\n    onMounted(() => {\n      Array.from(new Set(finalUrl.value as string[])).forEach((url: string) => {\n        checkLinkAndLoad(url, `${classPrefix}-iconfont-stylesheet--unique-class`);\n      });\n    });\n\n    const finalProps = computed(() => ({\n      class: classNames.value,\n      style: finalStyle.value,\n      onClick: (e:MouseEvent) => props.onClick?.({ e }),\n    }));\n\n    return () => h(props.tag || 'i', finalProps.value);\n  },\n});\n\nexport default IconFont;\n"],"names":["classPrefix","ConfigContext","CDN_ICONFONT_URL","IconFont","defineComponent","name","props","setup","attrs","_ref","propsSize","computed","size","className","sizeClassName","style","sizeStyle","useSizeProps","isBuiltinIcon","url","test","finalUrl","Array","concat","loadDefaultIcons","push","classNames","value","finalStyle","_objectSpread","onMounted","from","Set","forEach","checkLinkAndLoad","finalProps","class","onClick","e","_props2$onClick","h","tag"],"mappings":"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"}