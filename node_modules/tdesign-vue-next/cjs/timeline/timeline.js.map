{"version":3,"file":"timeline.js","sources":["../../src/timeline/timeline.tsx"],"sourcesContent":["import { defineComponent, provide, computed } from 'vue';\nimport TimeLineProps from './props';\nimport { TimelineInjectKey, DefaultAlign } from './hooks';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useChildComponentSlots } from '../hooks/slot';\nimport TimelineItem from './timeline-item';\nimport log from '../_common/js/log';\n\nexport default defineComponent({\n  name: 'TTimeline',\n  props: TimeLineProps,\n\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('timeline');\n    const renderAlign = computed(() => {\n      const { labelAlign, layout } = props;\n      let res = layout === 'vertical' ? 'left' : 'top';\n      if (layout === 'vertical' && labelAlign) {\n        const index = DefaultAlign.horizontal.indexOf(labelAlign);\n        const isError = index !== -1;\n        isError && log.warn('Timeline', 'If layout is vertical, align should be \"left\",\"alternate\" or \"right\" ');\n        res = isError ? DefaultAlign.vertical[index] : labelAlign;\n      }\n      if (layout === 'horizontal' && labelAlign) {\n        const index = DefaultAlign.vertical.indexOf(labelAlign);\n        const isError = index !== -1;\n        isError && log.warn('Timeline', 'If layout is horizontal, align should be \"top\",\"alternate\" or \"bottom\" ');\n        res = isError ? DefaultAlign.horizontal[index] : labelAlign;\n      }\n      return res;\n    });\n\n    const getChildComponentSlots = useChildComponentSlots();\n\n    const timelineItems = computed(() => {\n      const items = getChildComponentSlots('TTimelineItem');\n      if (props.reverse) {\n        items.reverse();\n      }\n      return items;\n    });\n\n    const TimeLineProvide = computed(() => {\n      const { theme, reverse, layout, labelAlign, mode } = props;\n      return {\n        theme,\n        reverse,\n        itemsStatus: [''],\n        layout,\n        globalAlign: labelAlign,\n        mode,\n        renderAlign: renderAlign.value,\n      };\n    });\n\n    const hasLabelItem = 1;\n    provide(TimelineInjectKey, TimeLineProvide);\n\n    return () => (\n      <ul\n        class={[\n          `${COMPONENT_NAME.value}`,\n          {\n            [`${COMPONENT_NAME.value}-${renderAlign.value}`]: true,\n            [`${COMPONENT_NAME.value}-reverse`]: props.reverse,\n            [`${COMPONENT_NAME.value}-${props.layout}`]: true,\n            [`${COMPONENT_NAME.value}-label`]: hasLabelItem,\n            [`${COMPONENT_NAME.value}-label--${props.mode}`]: true,\n          },\n        ]}\n      >\n        {timelineItems.value.map((item, index) => (\n          <TimelineItem\n            {...item.props}\n            index={index}\n            class={{ [`${COMPONENT_NAME.value}-item--last`]: index === timelineItems.value.length - 1 }}\n            v-slots={item.children}\n          ></TimelineItem>\n        ))}\n      </ul>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","TimeLineProps","setup","COMPONENT_NAME","usePrefixClass","renderAlign","computed","labelAlign","layout","res","index","DefaultAlign","horizontal","indexOf","isError","log","warn","vertical","getChildComponentSlots","useChildComponentSlots","timelineItems","items","reverse","TimeLineProvide","theme","mode","itemsStatus","globalAlign","value","hasLabelItem","provide","TimelineInjectKey","_ref","_createVNode","concat","_defineProperty","map","item","TimelineItem","_mergeProps","length","children"],"mappings":"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"}