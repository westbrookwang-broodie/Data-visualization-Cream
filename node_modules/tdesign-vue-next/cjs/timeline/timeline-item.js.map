{"version":3,"file":"timeline-item.js","sources":["../../src/timeline/timeline-item.tsx"],"sourcesContent":["import { defineComponent, inject } from 'vue';\nimport TimeLineItemProps from './time-line-item-props';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useContent, useTNodeJSX } from '../hooks/tnode';\nimport { TimelineInjectKey, DEFAULT_PROVIDER } from './hooks';\nimport Loading from '../loading';\n\nconst DEFAULT_THEME = ['default', 'primary', 'success', 'warning', 'error'];\n\nexport default defineComponent({\n  name: 'TTimelineItem',\n  props: {\n    ...TimeLineItemProps,\n    index: {\n      type: Number,\n    },\n  },\n\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('timeline-item');\n    // unit test need default value\n\n    const TimelineProvider = inject(TimelineInjectKey, DEFAULT_PROVIDER);\n    const renderContent = useContent();\n    const renderTNodeJSX = useTNodeJSX();\n\n    // 计算节点模式 CSS 类名\n    const getPositionClassName = (index: number) => {\n      const { layout, renderAlign } = TimelineProvider.value;\n      // TimelineItem.labelAlign > Timeline.labelAlign\n      const timelineItemAlign = props.labelAlign ?? renderAlign;\n      // 横向布局 以及 纵向布局对应为不同的样式名\n      const left = layout === 'horizontal' ? 'top' : 'left';\n      const right = layout === 'horizontal' ? 'bottom' : 'right';\n      // 单独设置则单独生效\n      if (timelineItemAlign === 'alternate') {\n        return index % 2 === 0 ? `${COMPONENT_NAME.value}-${left}` : `${COMPONENT_NAME.value}-${right}`;\n      }\n      if (timelineItemAlign === 'left' || timelineItemAlign === 'top') {\n        return `${COMPONENT_NAME.value}-${left}`;\n      }\n      if (timelineItemAlign === 'right' || timelineItemAlign === 'bottom') {\n        return `${COMPONENT_NAME.value}-${right}`;\n      }\n      return '';\n    };\n\n    return () => {\n      const { mode, theme, itemsStatus, reverse } = TimelineProvider.value;\n      const { loading, dotColor, index } = props;\n\n      const labelNode = renderTNodeJSX('label');\n      const dotElement = renderTNodeJSX('dot');\n\n      const dotContentClass = `${COMPONENT_NAME.value}__dot-content`;\n      if (dotElement?.props) {\n        const classes = dotElement?.props?.class;\n        dotElement.props.class = classes ? [dotContentClass, classes].join(' ') : dotContentClass;\n      }\n\n      return (\n        <li class={[`${COMPONENT_NAME.value}`, `${getPositionClassName(props.index)}`]}>\n          {mode === 'alternate' && labelNode && (\n            <div class={[`${COMPONENT_NAME.value}__label`, `${COMPONENT_NAME.value}__label--${mode}`]}>{labelNode}</div>\n          )}\n          <div class={`${COMPONENT_NAME.value}__wrapper`}>\n            <div\n              class={{\n                [`${COMPONENT_NAME.value}__dot`]: true,\n                [`${COMPONENT_NAME.value}__dot--custom`]: !!dotElement || (!dotElement && loading),\n                [`${COMPONENT_NAME.value}__dot--${dotColor}`]: DEFAULT_THEME.includes(dotColor),\n              }}\n              style={{ borderColor: !DEFAULT_THEME.includes(dotColor) && dotColor }}\n            >\n              {!dotElement && loading && <Loading size=\"12px\" class={dotContentClass} />}\n              {dotElement}\n            </div>\n            <div\n              class={{\n                [`${COMPONENT_NAME.value}__tail`]: true,\n                [`${COMPONENT_NAME.value}__tail--theme-${theme}`]: true,\n                [`${COMPONENT_NAME.value}__tail--status-${itemsStatus[index]}`]: reverse,\n              }}\n            />\n          </div>\n          <div class={`${COMPONENT_NAME.value}__content`}>\n            {renderContent('default', 'content')}\n            {mode === 'same' && labelNode && (\n              <div class={[`${COMPONENT_NAME.value}__label`, `${COMPONENT_NAME.value}__label--${mode}`]}>\n                {labelNode}\n              </div>\n            )}\n          </div>\n        </li>\n      );\n    };\n  },\n});\n"],"names":["DEFAULT_THEME","defineComponent","name","props","_objectSpread","TimeLineItemProps","index","type","Number","setup","COMPONENT_NAME","usePrefixClass","TimelineProvider","inject","TimelineInjectKey","DEFAULT_PROVIDER","renderContent","useContent","renderTNodeJSX","useTNodeJSX","getPositionClassName","_props$labelAlign","_TimelineProvider$val","value","layout","renderAlign","timelineItemAlign","labelAlign","left","right","concat","_ref","_ref2","_TimelineProvider$val2","mode","theme","itemsStatus","reverse","loading","dotColor","labelNode","dotElement","dotContentClass","_dotElement$props","classes","join","_createVNode","_defineProperty","includes","borderColor","Loading"],"mappings":"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"}