{"version":3,"file":"useKeyboard.js","sources":["../../src/radio/useKeyboard.ts"],"sourcesContent":["import { onBeforeMount, onMounted, Ref } from 'vue';\nimport { off, on } from '../utils/dom';\nimport isString from 'lodash/isString';\n\n/** 键盘操作 */\nexport default function useKeyboard(\n  radioGroupRef: Ref<HTMLElement>,\n  setInnerValue: (value: any, context: { e: Event }) => void,\n) {\n  const checkRadioInGroup = (e: KeyboardEvent) => {\n    if (/enter/i.test(e.key) || /enter/i.test(e.code)) {\n      const inputNode = (e.target as HTMLElement).querySelector('input');\n      const data = inputNode.dataset;\n      if (inputNode.checked && data.allowUncheck) {\n        setInnerValue(undefined, { e });\n      } else {\n        // Number\n        let value: number | string | boolean = !isNaN(Number(data.value)) ? Number(data.value) : data.value;\n        // Boolean\n        value = (isString(value) && { true: true, false: false }[value]) || value;\n        // String\n        value = isString(value) && value[0] === \"'\" ? value.replace(/'/g, '') : value;\n        setInnerValue(value, { e });\n      }\n    }\n  };\n\n  onMounted(() => {\n    on(radioGroupRef.value, 'keydown', checkRadioInGroup);\n  });\n\n  onBeforeMount(() => {\n    off(radioGroupRef.value, 'keydown', checkRadioInGroup);\n  });\n}\n"],"names":["useKeyboard","radioGroupRef","setInnerValue","checkRadioInGroup","e","test","key","code","inputNode","target","querySelector","data","dataset","checked","allowUncheck","value","isNaN","Number","isString","replace","onMounted","on","onBeforeMount","off"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAKwB,SAAAA,WAAAA,CACtBC,eACAC,aACA,EAAA;AACM,EAAA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAAA,CAAqBC,CAAqB,EAAA;AAC1C,IAAA,IAAA,QAAA,CAASC,KAAKD,CAAE,CAAAE,GAAG,KAAK,QAAS,CAAAD,IAAA,CAAKD,CAAE,CAAAG,IAAI,CAAG,EAAA;MACjD,IAAMC,SAAa,GAAAJ,CAAA,CAAEK,MAAuB,CAAAC,aAAA,CAAc,OAAO,CAAA,CAAA;AACjE,MAAA,IAAMC,OAAOH,SAAU,CAAAI,OAAA,CAAA;AACnB,MAAA,IAAAJ,SAAA,CAAUK,OAAW,IAAAF,IAAA,CAAKG,YAAc,EAAA;QAC5BZ,aAAA,CAAA,KAAA,CAAA,EAAW;AAAEE,UAAAA,CAAA,EAAAA,CAAAA;AAAE,SAAC,CAAA,CAAA;AAChC,OAAO,MAAA;QAEL,IAAIW,KAAmC,GAAA,CAACC,KAAM,CAAAC,MAAA,CAAON,IAAK,CAAAI,KAAK,CAAC,CAAA,GAAIE,MAAO,CAAAN,IAAA,CAAKI,KAAK,CAAA,GAAIJ,IAAK,CAAAI,KAAA,CAAA;AAErFA,QAAAA,KAAA,GAAAG,4BAAA,CAASH,KAAK,CAAK,IAAA;AAAE,UAAA,MAAA,EAAM,IAAM;UAAA,OAAO,EAAA,KAAA;AAAM,SAAA,CAAEA,KAAW,CAAA,IAAAA,KAAA,CAAA;QAE5DA,KAAA,GAAAG,4BAAA,CAASH,KAAK,CAAA,IAAKA,KAAM,CAAA,CAAA,CAAA,KAAO,MAAMA,KAAM,CAAAI,OAAA,CAAQ,IAAM,EAAA,EAAE,CAAI,GAAAJ,KAAA,CAAA;QAC1Db,aAAA,CAAAa,KAAA,EAAO;AAAEX,UAAAA,CAAA,EAAAA,CAAAA;AAAE,SAAC,CAAA,CAAA;AAC5B,OAAA;AACF,KAAA;GACF,CAAA;AAEAgB,EAAAA,aAAA,CAAU,YAAM;IACXC,YAAA,CAAApB,aAAA,CAAcc,KAAO,EAAA,SAAA,EAAWZ,iBAAiB,CAAA,CAAA;AACtD,GAAC,CAAA,CAAA;AAEDmB,EAAAA,iBAAA,CAAc,YAAM;IACdC,aAAA,CAAAtB,aAAA,CAAcc,KAAO,EAAA,SAAA,EAAWZ,iBAAiB,CAAA,CAAA;AACvD,GAAC,CAAA,CAAA;AACH;;;;"}