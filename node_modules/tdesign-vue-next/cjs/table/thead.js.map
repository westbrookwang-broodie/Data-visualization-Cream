{"version":3,"file":"thead.js","sources":["../../src/table/thead.tsx"],"sourcesContent":["import { defineComponent, computed, SetupContext, PropType, ref, Ref, h, CSSProperties } from 'vue';\nimport isFunction from 'lodash/isFunction';\nimport { getColumnFixedStyles } from './hooks/useFixed';\nimport useClassName from './hooks/useClassName';\nimport { BaseTableCol, TableRowData, TdBaseTableProps } from './type';\nimport { renderTitle } from './hooks/useTableHeader';\nimport TEllipsis from './ellipsis';\nimport { formatClassNames } from './utils';\nimport { RowAndColFixedPosition, BaseTableColumns, ThRowspanAndColspan } from './interface';\nimport { AttachNode } from '../common';\n\nexport interface TheadProps {\n  classPrefix: string;\n  ellipsisOverlayClassName: string;\n  // 是否固定表头\n  isFixedHeader: boolean;\n  maxHeight?: TdBaseTableProps['maxHeight'];\n  height?: TdBaseTableProps['height'];\n  // 固定列 left/right 具体值\n  rowAndColFixedPosition: RowAndColFixedPosition;\n  // 虚拟滚动单独渲染表头；表头吸顶单独渲染表头\n  thWidthList?: { [colKey: string]: number };\n  bordered?: boolean;\n  isMultipleHeader?: boolean;\n  thDraggable?: boolean;\n  spansAndLeafNodes?: {\n    rowspanAndColspanMap: ThRowspanAndColspan;\n    leafColumns: BaseTableCol<TableRowData>[];\n  };\n  thList: BaseTableCol<TableRowData>[][];\n  columnResizeParams: {\n    resizeLineRef: Ref<HTMLDivElement>;\n    resizeLineStyle: CSSProperties;\n    onColumnMouseover: (e: MouseEvent, col: BaseTableCol<TableRowData>) => void;\n    onColumnMousedown: (e: MouseEvent, col: BaseTableCol<TableRowData>, index: number) => void;\n  };\n  resizable?: Boolean;\n  attach?: AttachNode;\n  showColumnShadow?: { left: boolean; right: boolean };\n}\n\nexport default defineComponent({\n  name: 'THead',\n\n  props: {\n    classPrefix: String,\n    ellipsisOverlayClassName: String,\n    isFixedHeader: Boolean,\n    thDraggable: Boolean,\n    maxHeight: [String, Number] as PropType<TheadProps['maxHeight']>,\n    height: [String, Number] as PropType<TheadProps['height']>,\n    rowAndColFixedPosition: Map as PropType<TheadProps['rowAndColFixedPosition']>,\n    thWidthList: Object as PropType<TheadProps['thWidthList']>,\n    bordered: Boolean,\n    isMultipleHeader: Boolean,\n    resizable: Boolean,\n    attach: [String, Function] as PropType<TheadProps['attach']>,\n    spansAndLeafNodes: Object as PropType<TheadProps['spansAndLeafNodes']>,\n    thList: Array as PropType<TheadProps['thList']>,\n    columnResizeParams: Object as PropType<TheadProps['columnResizeParams']>,\n    showColumnShadow: Object as PropType<TheadProps['showColumnShadow']>,\n  },\n\n  setup(props: TheadProps, { slots }: SetupContext) {\n    const theadRef = ref<HTMLHeadElement>();\n    const classnames = useClassName();\n    const { tableHeaderClasses, tableBaseClass } = classnames;\n    const theadClasses = computed(() => [\n      tableHeaderClasses.header,\n      {\n        [tableHeaderClasses.fixed]: Boolean(props.maxHeight || props.height),\n        [tableBaseClass.bordered]: props.bordered && props.isMultipleHeader,\n        [tableHeaderClasses.multipleHeader]: props.isMultipleHeader,\n      },\n    ]);\n\n    // 单行表格合并\n    const colspanSkipMap = computed(() => {\n      const map: { [key: string]: boolean } = {};\n      const list = props.thList[0];\n      for (let i = 0, len = list.length; i < len; i++) {\n        const item = list[i];\n        if (item.colspan > 1) {\n          for (let j = i + 1; j < i + item.colspan; j++) {\n            if (list[j]) {\n              map[list[j].colKey] = true;\n            }\n          }\n        }\n      }\n      return map;\n    });\n\n    const getTableNode = (thead: HTMLElement) => {\n      let parent = thead;\n      while (parent) {\n        parent = parent.parentNode as HTMLElement;\n        if (parent?.classList?.contains(`${props.classPrefix}-table`)) {\n          break;\n        }\n      }\n      return parent;\n    };\n\n    return {\n      ...classnames,\n      colspanSkipMap,\n      theadClasses,\n      theadRef,\n      slots,\n      getTableNode,\n    };\n  },\n\n  render() {\n    const renderThNodeList = (\n      rowAndColFixedPosition: RowAndColFixedPosition,\n      thWidthList: TheadProps['thWidthList'],\n    ) => {\n      // thBorderMap: rowspan 会影响 tr > th 是否为第一列表头，从而影响边框\n      const thBorderMap = new Map<any, boolean>();\n      const thRowspanAndColspan = this.spansAndLeafNodes.rowspanAndColspanMap;\n      return this.thList.map((row, rowIndex) => {\n        const thRow = row.map((col: BaseTableColumns[0], index: number) => {\n          // 因合并单行表头，跳过\n          if (this.colspanSkipMap[col.colKey]) return null;\n          const rowspanAndColspan = thRowspanAndColspan.get(col);\n          if (index === 0 && rowspanAndColspan.rowspan > 1) {\n            for (let j = rowIndex + 1; j < rowIndex + rowspanAndColspan.rowspan; j++) {\n              thBorderMap.set(this.thList[j][0], true);\n            }\n          }\n          const thStyles = getColumnFixedStyles(col, index, rowAndColFixedPosition, this.tableColFixedClasses);\n          const colParams = {\n            col,\n            colIndex: index,\n            row: {},\n            rowIndex: -1,\n          };\n          const customClasses = formatClassNames(col.className, { ...colParams, type: 'th' });\n          const isLeftFixedActive = this.showColumnShadow.left && col.fixed === 'left';\n          const isRightFixedActive = this.showColumnShadow.right && col.fixed === 'right';\n          const canDragSort = this.thDraggable && !(isLeftFixedActive || isRightFixedActive);\n          const thClasses = [\n            thStyles.classes,\n            customClasses,\n            {\n              // 受 rowspan 影响，部分 tr > th:first-child 需要补足左边框\n              [this.tableHeaderClasses.thBordered]: thBorderMap.get(col),\n              [`${this.classPrefix}-table__th-${col.colKey}`]: col.colKey,\n              [this.tdAlignClasses[col.align]]: col.align && col.align !== 'left',\n              // 允许拖拽的列类名\n              [this.tableDraggableClasses.dragSortTh]: canDragSort,\n            },\n          ];\n          const withoutChildren = !col.children?.length;\n          const width = withoutChildren && thWidthList?.[col.colKey] ? `${thWidthList?.[col.colKey]}px` : undefined;\n          const styles = { ...(thStyles.style || {}), width };\n          const innerTh = renderTitle(this.slots, col, index);\n          const resizeColumnListener =\n            this.resizable || !canDragSort\n              ? {\n                  onMousedown: (e: MouseEvent) => {\n                    if (this.resizable) {\n                      this.columnResizeParams?.onColumnMousedown?.(e, col, index);\n                    }\n                    if (!canDragSort) {\n                      const timer = setTimeout(() => {\n                        const thList = this.theadRef.querySelectorAll('th');\n                        thList[index]?.removeAttribute('draggable');\n                        clearTimeout(timer);\n                      }, 10);\n                    }\n                  },\n                  onMousemove: (e: MouseEvent) => {\n                    this.resizable && this.columnResizeParams?.onColumnMouseover?.(e, col);\n                  },\n                }\n              : {};\n          const content = isFunction(col.ellipsisTitle) ? col.ellipsisTitle(h, { col, colIndex: index }) : undefined;\n          const isEllipsis = col.ellipsisTitle !== undefined ? Boolean(col.ellipsisTitle) : Boolean(col.ellipsis);\n          const attrs = (isFunction(col.attrs) ? col.attrs({ ...colParams, type: 'th' }) : col.attrs) || {};\n          if (col.colspan > 1) {\n            attrs.colspan = col.colspan;\n          }\n          return (\n            <th\n              key={col.colKey}\n              data-colkey={col.colKey}\n              class={thClasses}\n              style={styles}\n              {...attrs}\n              {...rowspanAndColspan}\n              {...resizeColumnListener}\n            >\n              <div class={this.tableBaseClass.thCellInner}>\n                {isEllipsis ? (\n                  <TEllipsis\n                    placement=\"bottom\"\n                    attach={this.attach || (this.theadRef ? () => this.getTableNode(this.theadRef) : undefined)}\n                    tooltipContent={content && (() => content)}\n                    tooltipProps={typeof col.ellipsisTitle === 'object' ? col.ellipsisTitle : undefined}\n                    overlayClassName={this.ellipsisOverlayClassName}\n                    classPrefix={this.classPrefix}\n                  >\n                    {innerTh}\n                  </TEllipsis>\n                ) : (\n                  innerTh\n                )}\n              </div>\n            </th>\n          );\n        });\n        return <tr key={rowIndex}>{thRow}</tr>;\n      });\n    };\n\n    return (\n      <thead ref=\"theadRef\" class={this.theadClasses}>\n        {renderThNodeList(this.rowAndColFixedPosition, this.thWidthList)}\n      </thead>\n    );\n  },\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","defineComponent","name","props","classPrefix","String","ellipsisOverlayClassName","isFixedHeader","Boolean","thDraggable","maxHeight","Number","height","rowAndColFixedPosition","Map","thWidthList","bordered","isMultipleHeader","resizable","attach","Function","spansAndLeafNodes","thList","Array","columnResizeParams","showColumnShadow","setup","_ref","slots","theadRef","ref","classnames","useClassName","tableHeaderClasses","tableBaseClass","theadClasses","computed","_ref2","header","_defineProperty","fixed","multipleHeader","colspanSkipMap","map","list","i","len","length","item","colspan","j","colKey","getTableNode","thead","parent","_parent","_parent$classList","parentNode","classList","contains","concat","_objectSpread","render","_this","renderThNodeList","thBorderMap","thRowspanAndColspan","rowspanAndColspanMap","row","rowIndex","thRow","col","index","_ref3","_col$children","rowspanAndColspan","get","rowspan","set","thStyles","getColumnFixedStyles","tableColFixedClasses","colParams","colIndex","customClasses","formatClassNames","className","type","isLeftFixedActive","left","isRightFixedActive","right","canDragSort","thClasses","classes","thBordered","tdAlignClasses","align","tableDraggableClasses","dragSortTh","withoutChildren","children","width","styles","style","innerTh","renderTitle","resizeColumnListener","onMousedown","e","_this$columnResizePar","_this$columnResizePar2","onColumnMousedown","timer","setTimeout","_thList$index","querySelectorAll","removeAttribute","clearTimeout","onMousemove","_this$columnResizePar3","_this$columnResizePar4","onColumnMouseover","content","isFunction","ellipsisTitle","h","isEllipsis","ellipsis","attrs","_createVNode","_mergeProps","thCellInner","TEllipsis","_typeof","_default"],"mappings":"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"}