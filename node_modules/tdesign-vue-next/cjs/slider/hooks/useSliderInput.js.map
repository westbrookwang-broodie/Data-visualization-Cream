{"version":3,"file":"useSliderInput.js","sources":["../../../src/slider/hooks/useSliderInput.tsx"],"sourcesContent":["import { computed, Ref } from 'vue';\nimport { TdSliderProps } from '../type';\nimport InputNumber, { InputNumberProps } from '../../input-number';\nimport isBoolean from 'lodash/isBoolean';\n\nconst INPUT_NUMBER_PROPS_INITIAL_STATE: InputNumberProps = {\n  decimalPlaces: 0,\n  format: undefined as InputNumberProps['format'],\n  placeholder: '',\n  theme: 'column' as InputNumberProps['theme'],\n};\n\ninterface useSliderInputProps {\n  inputNumberProps: boolean | TdSliderProps['inputNumberProps'];\n  max: number;\n  min: number;\n  step: number;\n  prefixName: string;\n  vertical: boolean;\n  disabled: boolean;\n}\n\n/**\n * 聚合管理inputNumber渲染逻辑\n */\nexport const useSliderInput = (config: Ref<useSliderInputProps>) => {\n  const name = config.value.prefixName;\n\n  /** 根据传入属性缓存计算inputNumber props */\n  const sliderInputState = computed(() => {\n    let initialState = { ...INPUT_NUMBER_PROPS_INITIAL_STATE };\n    const inputProps = config.value;\n    if (!isBoolean(inputProps.inputNumberProps)) {\n      const inputTheme = inputProps.inputNumberProps?.theme;\n      initialState = { ...initialState, ...inputProps.inputNumberProps };\n      if (['column', 'row', 'normal'].includes(inputTheme)) {\n        initialState.theme = inputTheme;\n      }\n    }\n    return initialState;\n  });\n\n  const sliderNumberClass = computed(() => {\n    return [\n      `${name}__input`,\n      {\n        'is-vertical': config.value.vertical,\n      },\n    ];\n  });\n\n  const renderInputNumber = (val: number, changeFn: (val: number) => void) => {\n    // if exist min or max prop, onChange callback function will pass undefined value when decrease\n    const normalizeChangeFn = (num: number | undefined) => {\n      if (num !== undefined && !isNaN(num)) {\n        changeFn(num);\n      }\n    };\n    return (\n      <InputNumber\n        {...sliderInputState.value}\n        class={sliderNumberClass.value}\n        value={val}\n        step={config.value.step}\n        onChange={normalizeChangeFn}\n        disabled={config.value.disabled}\n        min={config.value.min}\n        max={config.value.max}\n      />\n    );\n  };\n\n  return renderInputNumber;\n};\n"],"names":["INPUT_NUMBER_PROPS_INITIAL_STATE","decimalPlaces","format","placeholder","theme","useSliderInput","config","name","value","prefixName","sliderInputState","computed","initialState","_objectSpread","inputProps","isBoolean","inputNumberProps","_inputProps$inputNumb","inputTheme","includes","sliderNumberClass","concat","vertical","renderInputNumber","val","changeFn","normalizeChangeFn","num","isNaN","_createVNode","InputNumber","_mergeProps","step","disabled","min","max"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,IAAMA,gCAAqD,GAAA;AACzDC,EAAAA,aAAe,EAAA,CAAA;EACfC,MAAQ,EAAA,KAAA,CAAA;AACRC,EAAAA,WAAa,EAAA,EAAA;AACbC,EAAAA,KAAO,EAAA,QAAA;AACT,CAAA,CAAA;IAeaC,cAAA,GAAiB,SAAjBA,cAAAA,CAAkBC,MAAqC,EAAA;AAC5D,EAAA,IAAAC,IAAA,GAAOD,OAAOE,KAAM,CAAAC,UAAA,CAAA;AAGpB,EAAA,IAAAC,gBAAA,GAAmBC,aAAS,YAAM;AAClC,IAAA,IAAAC,YAAA,GAAAC,aAAA,CAAA,EAAA,EAAoBb,gCAAiC,CAAA,CAAA;AACzD,IAAA,IAAMc,aAAaR,MAAO,CAAAE,KAAA,CAAA;AAC1B,IAAA,IAAI,CAACO,6BAAA,CAAUD,UAAW,CAAAE,gBAAgB,CAAG,EAAA;AAAA,MAAA,IAAAC,qBAAA,CAAA;AACrC,MAAA,IAAAC,UAAA,GAAA,CAAAD,qBAAA,GAAaH,WAAWE,gBAAkB,MAAA,IAAA,IAAAC,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAA7BA,qBAAA,CAA6Bb,KAAA,CAAA;MAChDQ,YAAA,GAAAC,aAAA,CAAAA,aAAA,CAAA,EAAA,EAAoBD,YAAc,CAAGE,EAAAA,WAAWE,gBAAiB,CAAA,CAAA;AACjE,MAAA,IAAI,CAAC,QAAU,EAAA,KAAA,EAAO,QAAQ,CAAE,CAAAG,QAAA,CAASD,UAAU,CAAG,EAAA;QACpDN,YAAA,CAAaR,KAAQ,GAAAc,UAAA,CAAA;AACvB,OAAA;AACF,KAAA;AACO,IAAA,OAAAN,YAAA,CAAA;AACT,GAAC,CAAA,CAAA;AAEK,EAAA,IAAAQ,iBAAA,GAAoBT,aAAS,YAAM;AAChC,IAAA,OAAA,CAAAU,EAAAA,CAAAA,MAAA,CACFd,IAAA,EACH,SAAA,CAAA,EAAA;AACE,MAAA,aAAA,EAAeD,OAAOE,KAAM,CAAAc,QAAAA;AAC9B,KAAA,CACF,CAAA;AACF,GAAC,CAAA,CAAA;EAEK,IAAAC,iBAAA,GAAoB,SAApBA,iBAAAA,CAAqBC,GAAA,EAAaC,QAAoC,EAAA;AAEpE,IAAA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAAA,CAAqBC,GAA4B,EAAA;MACrD,IAAIA,GAAQ,KAAA,KAAA,CAAA,IAAa,CAACC,KAAA,CAAMD,GAAG,CAAG,EAAA;QACpCF,QAAA,CAASE,GAAG,CAAA,CAAA;AACd,OAAA;KACF,CAAA;IAEE,OAAAE,eAAA,CAAAC,6BAAA,EAAAC,cAAA,CACMrB,gBAAA,CAAiBF,KACrB,EAAA;MAAA,OAAOY,EAAAA,iBAAkB,CAAAZ,KAAA;AAAA,MAAA,OAAA,EAClBgB,GAAA;AAAA,MAAA,MAAA,EACDlB,MAAA,CAAOE,KAAM,CAAAwB,IAAA;AAAA,MAAA,UAAA,EACTN,iBACV;AAAA,MAAA,UAAA,EAAUpB,MAAO,CAAAE,KAAA,CAAMyB,QACvB;AAAA,MAAA,KAAA,EAAK3B,MAAO,CAAAE,KAAA,CAAM0B,GAClB;MAAA,KAAK5B,EAAAA,MAAO,CAAAE,KAAA,CAAM2B,GAAAA;AACpB,KAAA,CAAA,EAAA,IAAA,CAAA,CAAA;GAEJ,CAAA;AAEO,EAAA,OAAAZ,iBAAA,CAAA;AACT;;;;"}