{"version":3,"file":"useResizeObserver.js","sources":["../../src/hooks/useResizeObserver.ts"],"sourcesContent":["import { Ref, watch, onBeforeUnmount } from 'vue';\n\nexport default function useResizeObserver(\n  container: Ref<HTMLElement>,\n  callback: (data: ResizeObserverEntry[]) => void,\n) {\n  if (typeof window === 'undefined') return;\n\n  const isSupport = window && (window as Window & typeof globalThis).ResizeObserver;\n  // unit tests do not need any warn console; too many warns influence focusing on more important log info\n  if (!isSupport) return;\n\n  let containerObserver: ResizeObserver = null;\n\n  const cleanupObserver = () => {\n    if (!containerObserver) return;\n    containerObserver.unobserve(container.value);\n    containerObserver.disconnect();\n    containerObserver = null;\n  };\n\n  const addObserver = (el: HTMLElement) => {\n    containerObserver = new ResizeObserver(callback);\n    containerObserver.observe(el);\n  };\n\n  if (container) {\n    watch(\n      container,\n      (el) => {\n        cleanupObserver();\n        el && addObserver(el);\n      },\n      { immediate: true, flush: 'post' },\n    );\n  }\n\n  onBeforeUnmount(() => {\n    cleanupObserver();\n  });\n}\n"],"names":["useResizeObserver","container","callback","window","isSupport","ResizeObserver","containerObserver","cleanupObserver","unobserve","value","disconnect","addObserver","el","observe","watch","immediate","flush","onBeforeUnmount"],"mappings":";;;;;;;;;;;;AAEwB,SAAAA,iBAAAA,CACtBC,WACAC,QACA,EAAA;AACA,EAAA,IAAI,OAAOC,MAAW,KAAA,WAAA,EAAa,OAAA;AAE7B,EAAA,IAAAC,SAAA,GAAYD,UAAWA,MAAsC,CAAAE,cAAA,CAAA;EAEnE,IAAI,CAACD,SAAA,EAAW,OAAA;EAEhB,IAAIE,iBAAoC,GAAA,IAAA,CAAA;AAExC,EAAA,IAAMC,kBAAkB,SAAlBA,kBAAwB;IAC5B,IAAI,CAACD,iBAAA,EAAmB,OAAA;AACNA,IAAAA,iBAAA,CAAAE,SAAA,CAAUP,UAAUQ,KAAK,CAAA,CAAA;IAC3CH,iBAAA,CAAkBI,UAAW,EAAA,CAAA;AACTJ,IAAAA,iBAAA,GAAA,IAAA,CAAA;GACtB,CAAA;AAEM,EAAA,IAAAK,WAAA,GAAc,SAAdA,WAAAA,CAAeC,EAAoB,EAAA;AACnBN,IAAAA,iBAAA,GAAA,IAAID,eAAeH,QAAQ,CAAA,CAAA;AAC/CI,IAAAA,iBAAA,CAAkBO,QAAQD,EAAE,CAAA,CAAA;GAC9B,CAAA;AAEA,EAAA,IAAIX,SAAW,EAAA;AACba,IAAAA,SAAA,CACEb,SAAA,EACA,UAACW,EAAO,EAAA;AACUL,MAAAA,eAAA,EAAA,CAAA;AAChBK,MAAAA,EAAA,IAAMD,YAAYC,EAAE,CAAA,CAAA;AACtB,KAAA,EACA;AAAEG,MAAAA,SAAA,EAAW,IAAM;AAAAC,MAAAA,KAAA,EAAO,MAAA;AAAO,KAAA,CACnC,CAAA;AACF,GAAA;AAEAC,EAAAA,mBAAA,CAAgB,YAAM;AACJV,IAAAA,eAAA,EAAA,CAAA;AAClB,GAAC,CAAA,CAAA;AACH;;;;"}