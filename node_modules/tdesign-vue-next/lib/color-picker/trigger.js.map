{"version":3,"file":"trigger.js","sources":["../../src/color-picker/trigger.tsx"],"sourcesContent":["import { defineComponent, PropType, ref, watch } from 'vue';\nimport TInput from '../input';\nimport { Color } from './utils';\nimport { TdColorPickerProps } from './type';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'DefaultTrigger',\n  inheritAttrs: false,\n  props: {\n    color: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    clearable: {\n      type: Boolean,\n      default: false,\n    },\n    inputProps: {\n      type: Object as PropType<TdColorPickerProps['inputProps']>,\n      default: () => {\n        return {\n          autoWidth: true,\n        };\n      },\n    },\n    onTriggerChange: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const value = ref(props.color);\n\n    watch(\n      () => [props.color],\n      () => (value.value = props.color),\n    );\n\n    const handleChange = (input: string) => {\n      if (input === props.color) {\n        return;\n      }\n      if (input && !Color.isValid(input)) {\n        value.value = props.color;\n      } else {\n        value.value = input;\n      }\n      props.onTriggerChange(value.value);\n    };\n\n    return {\n      baseClassName,\n      value,\n      handleChange,\n    };\n  },\n\n  render() {\n    const { baseClassName } = this;\n    const inputSlots = {\n      label: () => {\n        return (\n          <div class={[`${baseClassName}__trigger--default__color`, `${baseClassName}--bg-alpha`]}>\n            <span\n              class={['color-inner']}\n              style={{\n                background: this.value,\n              }}\n            ></span>\n          </div>\n        );\n      },\n    };\n    return (\n      <TInput\n        clearable={this.clearable}\n        {...this.inputProps}\n        v-slots={inputSlots}\n        v-model={this.value}\n        disabled={this.disabled}\n        onBlur={this.handleChange}\n      />\n    );\n  },\n});\n"],"names":["defineComponent","name","inheritAttrs","props","color","type","String","disabled","Boolean","clearable","inputProps","Object","_default","autoWidth","onTriggerChange","Function","setup","baseClassName","useBaseClassName","value","ref","watch","handleChange","input","Color","isValid","render","_this","inputSlots","label","_createVNode","concat","background","TInput","_mergeProps","onUpdateModelValue","$event"],"mappings":"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"}