{"version":3,"file":"custom-file.js","sources":["../../../src/upload/themes/custom-file.tsx"],"sourcesContent":["import { defineComponent, PropType, toRefs } from 'vue';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport { CommonDisplayFileProps } from '../interface';\nimport { commonProps } from '../constants';\nimport { useContent } from '../../hooks/tnode';\nimport { TdUploadProps } from '../type';\n\nexport interface CustomFileProps extends CommonDisplayFileProps {\n  dragEvents: UploadDragEvents;\n  draggable?: boolean;\n  // 拖拽区域\n  dragContent?: TdUploadProps['dragContent'];\n  trigger?: TdUploadProps['trigger'];\n  triggerUpload?: (e: MouseEvent) => void;\n  childrenNode?: any;\n}\n\nexport default defineComponent({\n  name: 'UploadCustomFile',\n\n  props: {\n    ...commonProps,\n    dragEvents: Object as PropType<CustomFileProps['dragEvents']>,\n    draggable: Boolean,\n    // 拖拽区域\n    dragContent: Function as PropType<CustomFileProps['dragContent']>,\n    trigger: Function as PropType<CustomFileProps['trigger']>,\n    triggerUpload: Function as PropType<CustomFileProps['triggerUpload']>,\n    childrenNode: [String, Function] as PropType<CustomFileProps['childrenNode']>,\n  },\n\n  setup(props, { slots }) {\n    const { classPrefix, displayFiles } = toRefs(props);\n    const drag = useDrag(props.dragEvents);\n    const { dragActive } = drag;\n\n    const renderContent = useContent();\n\n    const renderDragContent = () => {\n      const params = { dragActive: dragActive.value || false, files: displayFiles.value };\n      return (\n        <div\n          class={`${classPrefix.value}-upload__dragger ${classPrefix.value}-upload__dragger-center`}\n          onDrop={drag.handleDrop}\n          onDragenter={drag.handleDragenter}\n          onDragover={drag.handleDragover}\n          onDragleave={drag.handleDragleave}\n          onClick={props.triggerUpload}\n        >\n          <div class={`${classPrefix.value}-upload__trigger`}>\n            {renderContent('dragContent', 'trigger', { params }) || props.childrenNode?.(params)}\n          </div>\n        </div>\n      );\n    };\n\n    return () => (\n      <>\n        {props.draggable ? (\n          renderDragContent()\n        ) : (\n          <div class={`${classPrefix.value}-upload__trigger`} onClick={props.triggerUpload}>\n            {props.childrenNode?.({ files: displayFiles.value }) || slots.default?.()}\n          </div>\n        )}\n      </>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","_objectSpread","commonProps","dragEvents","Object","draggable","Boolean","dragContent","Function","trigger","triggerUpload","childrenNode","String","setup","_ref","slots","_toRefs","toRefs","classPrefix","displayFiles","drag","useDrag","dragActive","renderContent","useContent","renderDragContent","_props$childrenNode","params","value","files","_createVNode","concat","handleDrop","handleDragenter","handleDragover","handleDragleave","call","_props$childrenNode2","_slots$default","_Fragment"],"mappings":"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"}