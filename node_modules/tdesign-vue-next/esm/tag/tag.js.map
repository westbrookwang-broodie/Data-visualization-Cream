{"version":3,"file":"tag.js","sources":["../../src/tag/tag.tsx"],"sourcesContent":["import { computed, defineComponent, h, VNode } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport props from './props';\nimport { useConfig, usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport isString from 'lodash/isString';\n\nexport default defineComponent({\n  name: 'TTag',\n  props,\n  setup(props) {\n    const { globalConfig: tagGlobalConfig } = useConfig('tag');\n    const COMPONENT_NAME = usePrefixClass('tag');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const { SIZE } = useCommonClassName();\n\n    const tagClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}--${props.theme}`,\n        `${COMPONENT_NAME.value}--${props.variant}`,\n        {\n          [`${COMPONENT_NAME.value}--ellipsis`]: props.maxWidth,\n          [`${COMPONENT_NAME.value}--close`]: props.closable,\n          [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n          [SIZE.value[props.size]]: props.size !== 'medium',\n        },\n        props.shape !== 'square' && `${COMPONENT_NAME.value}--${props.shape}`,\n      ];\n    });\n\n    const tagStyle = computed<Record<string, string>>(() => {\n      const { maxWidth } = props;\n      return props.maxWidth\n        ? {\n            maxWidth: isNaN(Number(maxWidth)) ? String(maxWidth) : `${maxWidth}px`,\n          }\n        : {};\n    });\n\n    const handleClick = (e: MouseEvent) => {\n      if (props.disabled) return;\n      props.onClick?.({ e });\n    };\n\n    const getCloseIcon = () => {\n      if (!props.closable) return null;\n      const iconClassName = `${COMPONENT_NAME.value}__icon-close`;\n      if (tagGlobalConfig.value.closeIcon) {\n        return h(tagGlobalConfig.value.closeIcon(h) as VNode, { class: iconClassName });\n      }\n      return (\n        <CloseIcon\n          onClick={({ e }: { e: MouseEvent }) => {\n            e.stopPropagation();\n            props.onClose?.({ e });\n          }}\n          class={iconClassName}\n        />\n      );\n    };\n\n    return () => {\n      // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n      const closeIcon = getCloseIcon();\n      // 标签内容\n      const tagContent = renderContent('default', 'content');\n      // 图标\n      const icon = renderTNodeJSX('icon');\n\n      const title = isString(tagContent) ? tagContent : '';\n      const titleAttribute = title && props.maxWidth ? title : undefined;\n\n      return (\n        <span class={tagClass.value} style={tagStyle.value} onClick={handleClick}>\n          {icon}\n          {props.maxWidth ? (\n            <span class={{ [`${COMPONENT_NAME.value}--text`]: props.maxWidth }} title={titleAttribute}>\n              {tagContent}\n            </span>\n          ) : (\n            tagContent\n          )}\n          {!props.disabled && closeIcon}\n        </span>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","_useConfig","useConfig","tagGlobalConfig","globalConfig","COMPONENT_NAME","usePrefixClass","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","renderTNodeJSX","useTNodeJSX","renderContent","useContent","_useCommonClassName","useCommonClassName","SIZE","tagClass","computed","_ref","concat","value","theme","variant","_defineProperty","maxWidth","closable","disabled","size","shape","tagStyle","isNaN","Number","String","handleClick","e","_props2$onClick","onClick","getCloseIcon","iconClassName","closeIcon","h","_createVNode","_ref2","_props2$onClose","stopPropagation","onClose","tagContent","icon","title","isString","titleAttribute"],"mappings":"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"}