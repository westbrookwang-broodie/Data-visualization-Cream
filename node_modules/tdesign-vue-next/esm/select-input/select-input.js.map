{"version":3,"file":"select-input.js","sources":["../../src/select-input/select-input.tsx"],"sourcesContent":["import { computed, defineComponent, ref, SetupContext, toRefs } from 'vue';\nimport Popup from '../popup';\nimport props from './props';\nimport { TdSelectInputProps } from './type';\nimport useSingle from './useSingle';\nimport useMultiple from './useMultiple';\nimport useOverlayInnerStyle from './useOverlayInnerStyle';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useTNodeJSX } from '../hooks';\n\nconst useComponentClassName = () => {\n  return {\n    NAME_CLASS: usePrefixClass('select-input'),\n    BASE_CLASS_BORDERLESS: usePrefixClass('select-input--borderless'),\n    BASE_CLASS_MULTIPLE: usePrefixClass('select-input--multiple'),\n    BASE_CLASS_POPUP_VISIBLE: usePrefixClass('select-input--popup-visible'),\n    BASE_CLASS_EMPTY: usePrefixClass('select-input--empty'),\n  };\n};\n\nexport default defineComponent({\n  name: 'TSelectInput',\n\n  props: { ...props },\n\n  setup(props: TdSelectInputProps, context: SetupContext) {\n    const { NAME_CLASS, BASE_CLASS_BORDERLESS, BASE_CLASS_MULTIPLE, BASE_CLASS_POPUP_VISIBLE, BASE_CLASS_EMPTY } =\n      useComponentClassName();\n    const classPrefix = usePrefixClass();\n    const renderTNodeJSX = useTNodeJSX();\n\n    const selectInputRef = ref();\n    const popupRef = ref();\n    const { multiple, value, popupVisible, borderless } = toRefs(props);\n    const { commonInputProps, onInnerClear, renderSelectSingle } = useSingle(props, context);\n    const { renderSelectMultiple } = useMultiple(props, context);\n    const { tOverlayInnerStyle, innerPopupVisible, onInnerPopupVisibleChange } = useOverlayInnerStyle(props);\n\n    const classes = computed(() => [\n      `${NAME_CLASS.value}`,\n      {\n        [BASE_CLASS_MULTIPLE.value]: multiple.value,\n        [BASE_CLASS_BORDERLESS.value]: borderless.value,\n        [BASE_CLASS_POPUP_VISIBLE.value]: popupVisible.value ?? innerPopupVisible.value,\n        [BASE_CLASS_EMPTY.value]: value.value instanceof Array ? !value.value.length : !value.value,\n      },\n    ]);\n\n    return {\n      classPrefix,\n      NAME_CLASS,\n      innerPopupVisible,\n      commonInputProps,\n      tOverlayInnerStyle,\n      selectInputRef,\n      popupRef,\n      classes,\n      onInnerClear,\n      renderTNodeJSX,\n      renderSelectSingle,\n      renderSelectMultiple,\n      onInnerPopupVisibleChange,\n    };\n  },\n\n  render() {\n    // 浮层显示的受控与非受控\n    const visibleProps = { visible: this.popupVisible ?? this.innerPopupVisible };\n\n    const mainContent = (\n      <Popup\n        ref=\"popupRef\"\n        trigger={(this.popupProps as TdSelectInputProps['popupProps'])?.trigger || 'click'}\n        placement=\"bottom-left\"\n        {...visibleProps}\n        content={this.panel}\n        v-slots={{ ...this.$slots, content: this.$slots.panel }}\n        hideEmptyPopup={true}\n        {...{\n          onVisibleChange: this.onInnerPopupVisibleChange,\n          ...(this.popupProps as TdSelectInputProps['popupProps']),\n          overlayInnerStyle: this.tOverlayInnerStyle,\n        }}\n      >\n        {this.multiple\n          ? this.renderSelectMultiple({\n              commonInputProps: this.commonInputProps,\n              onInnerClear: this.onInnerClear,\n              popupVisible: visibleProps.visible,\n            })\n          : this.renderSelectSingle(visibleProps.visible)}\n      </Popup>\n    );\n\n    const tipsNode = this.renderTNodeJSX('tips');\n\n    return (\n      <div ref=\"selectInputRef\" class={this.classes}>\n        {mainContent}\n        {tipsNode && (\n          <div class={`${this.classPrefix}-input__tips ${this.classPrefix}-input__tips--${this.status || 'normal'}`}>\n            {tipsNode}\n          </div>\n        )}\n      </div>\n    );\n  },\n});\n"],"names":["useComponentClassName","NAME_CLASS","usePrefixClass","BASE_CLASS_BORDERLESS","BASE_CLASS_MULTIPLE","BASE_CLASS_POPUP_VISIBLE","BASE_CLASS_EMPTY","defineComponent","name","props","_objectSpread","setup","context","_useComponentClassNam","classPrefix","renderTNodeJSX","useTNodeJSX","selectInputRef","ref","popupRef","_toRefs","toRefs","multiple","value","popupVisible","borderless","_useSingle","useSingle","commonInputProps","onInnerClear","renderSelectSingle","_useMultiple","useMultiple","renderSelectMultiple","_useOverlayInnerStyle","useOverlayInnerStyle","tOverlayInnerStyle","innerPopupVisible","onInnerPopupVisibleChange","classes","computed","_popupVisible$value","_ref","concat","_defineProperty","Array","length","render","_this$popupVisible","_this$popupProps","_this","visibleProps","visible","mainContent","_createVNode","Popup","_mergeProps","popupProps","trigger","panel","onVisibleChange","overlayInnerStyle","_default","$slots","content","tipsNode","status"],"mappings":"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"}