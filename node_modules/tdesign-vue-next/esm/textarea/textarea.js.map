{"version":3,"file":"textarea.js","sources":["../../src/textarea/textarea.tsx"],"sourcesContent":["import {\n  defineComponent,\n  computed,\n  watch,\n  ref,\n  nextTick,\n  onMounted,\n  toRefs,\n  inject,\n  StyleValue,\n  CSSProperties,\n} from 'vue';\nimport merge from 'lodash/merge';\nimport props from './props';\nimport { TextareaValue, TdTextareaProps } from './type';\nimport { getCharacterLength, omit } from '../utils/helper';\nimport calcTextareaHeight from './calcTextareaHeight';\nimport { FormItemInjectionKey } from '../form/const';\n\n// hooks\nimport useVModel from '../hooks/useVModel';\nimport { useFormDisabled } from '../form/hooks';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\n\nimport setStyle from '../_common/js/utils/set-style';\nimport isUndefined from 'lodash/isUndefined';\n\nfunction getValidAttrs(obj: object): object {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (!isUndefined(obj[key])) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TTextarea',\n  inheritAttrs: false,\n  props: { ...props },\n\n  setup(props: TdTextareaProps, { attrs, expose }) {\n    const prefix = usePrefixClass();\n    const name = usePrefixClass('textarea');\n    const TEXTAREA_TIPS_CLASS = computed(() => `${name.value}__tips`);\n    const TEXTAREA_LIMIT = computed(() => `${name.value}__limit`);\n\n    const { value, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const disabled = useFormDisabled();\n    const textareaStyle = ref<CSSProperties>({});\n\n    const refTextareaElem = ref<HTMLTextAreaElement>();\n    const focused = ref(false);\n    const isComposing = ref(false);\n\n    const focus = () => refTextareaElem.value?.focus();\n    const blur = () => refTextareaElem.value?.blur();\n\n    // methods\n    const adjustTextareaHeight = () => {\n      if (props.autosize === true) {\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value);\n      } else if (typeof props.autosize === 'object') {\n        const { minRows, maxRows } = props.autosize;\n        textareaStyle.value = calcTextareaHeight(refTextareaElem.value, minRows, maxRows);\n      } else if (attrs.rows) {\n        textareaStyle.value = { height: 'auto', minHeight: 'auto' };\n      } else if (attrs.style && refTextareaElem.value?.style?.height) {\n        textareaStyle.value = { height: refTextareaElem.value.style.height };\n      }\n    };\n\n    const setInputValue = (v: TextareaValue = '') => {\n      const textareaElem = refTextareaElem.value;\n      const sV = String(v);\n      if (!textareaElem) {\n        return;\n      }\n\n      if (textareaElem.value !== sV) {\n        textareaElem.value = sV;\n        innerValue.value = sV;\n      }\n    };\n    const inputValueChangeHandle = (e: InputEvent) => {\n      const { target } = e;\n      let val = (target as HTMLInputElement).value;\n      if (props.maxcharacter && props.maxcharacter >= 0) {\n        const stringInfo = getCharacterLength(val, props.maxcharacter);\n        val = typeof stringInfo === 'object' && stringInfo.characters;\n      }\n      !isComposing.value && setInnerValue(val, { e });\n      nextTick(() => setInputValue(val));\n      adjustTextareaHeight();\n    };\n\n    const handleInput = (e: InputEvent) => {\n      inputValueChangeHandle(e);\n    };\n\n    const onCompositionstart = () => {\n      isComposing.value = true;\n    };\n\n    const onCompositionend = (e: InputEvent | CompositionEvent) => {\n      isComposing.value = false;\n      inputValueChangeHandle(e as InputEvent);\n    };\n\n    const eventDeal = (name: 'keydown' | 'keyup' | 'keypress' | 'change', e: KeyboardEvent | FocusEvent) => {\n      if (disabled.value) return;\n      const _name = `on${name[0].toUpperCase()}${name.slice(1)}`;\n      props[_name]?.(innerValue.value, { e });\n    };\n\n    const emitKeyDown = (e: KeyboardEvent) => {\n      eventDeal('keydown', e);\n    };\n    const emitKeyUp = (e: KeyboardEvent) => {\n      eventDeal('keyup', e);\n    };\n    const emitKeypress = (e: KeyboardEvent) => {\n      eventDeal('keypress', e);\n    };\n\n    const emitFocus = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      if (disabled.value) return;\n      focused.value = true;\n      props.onFocus?.(innerValue.value, { e });\n    };\n\n    const formItem = inject(FormItemInjectionKey, undefined);\n    const emitBlur = (e: FocusEvent) => {\n      adjustTextareaHeight();\n      focused.value = false;\n      props.onBlur?.(innerValue.value, { e });\n      formItem?.handleBlur();\n    };\n\n    // computed\n    const textareaClasses = computed(() => {\n      return [\n        name.value,\n        {\n          [`${prefix.value}-is-disabled`]: disabled.value,\n          [`${prefix.value}-is-readonly`]: props.readonly,\n        },\n      ];\n    });\n    const inputAttrs = computed<Record<string, any>>(() => {\n      return getValidAttrs({\n        autofocus: props.autofocus,\n        disabled: disabled.value,\n        readonly: props.readonly,\n        placeholder: props.placeholder,\n        maxlength: props.maxlength || undefined,\n        name: props.name || undefined,\n      });\n    });\n    const characterNumber = computed(() => {\n      const characterInfo = getCharacterLength(String(innerValue.value || ''));\n      if (typeof characterInfo === 'object') {\n        return characterInfo.length;\n      }\n      return characterInfo;\n    });\n\n    // watch\n    watch(\n      () => innerValue.value,\n      () => adjustTextareaHeight(),\n    );\n\n    watch(refTextareaElem, (el) => {\n      if (!el) return;\n      adjustTextareaHeight();\n    });\n\n    watch(\n      () => props.autofocus,\n      (val) => {\n        if (val) {\n          refTextareaElem.value.focus();\n        }\n      },\n    );\n\n    watch(textareaStyle, (val) => {\n      const { style } = attrs as { style: StyleValue };\n      setStyle(refTextareaElem.value, merge(style, val));\n    });\n\n    expose({\n      focus,\n      blur,\n    });\n\n    onMounted(() => {\n      adjustTextareaHeight();\n    });\n\n    const renderTNodeJSX = useTNodeJSX();\n    return () => {\n      const inputEvents = getValidAttrs({\n        onFocus: emitFocus,\n        onBlur: emitBlur,\n        onKeydown: emitKeyDown,\n        onKeyup: emitKeyUp,\n        onKeypress: emitKeypress,\n      });\n      const { STATUS } = useCommonClassName();\n      const classes = computed(() => [\n        `${name.value}__inner`,\n        {\n          [`${prefix.value}-is-${props.status}`]: props.status,\n          [STATUS.value.disabled]: disabled.value,\n          [STATUS.value.focused]: focused.value,\n          [`${prefix.value}-resize-none`]: typeof props.autosize === 'object',\n        },\n        'narrow-scrollbar',\n      ]);\n\n      const tips = renderTNodeJSX('tips');\n\n      const textTips = tips && (\n        <div class={`${TEXTAREA_TIPS_CLASS.value} ${name.value}__tips--${props.status || 'normal'}`}>{tips}</div>\n      );\n\n      const limitText =\n        (props.maxcharacter && (\n          <span class={TEXTAREA_LIMIT.value}>{`${characterNumber.value}/${props.maxcharacter}`}</span>\n        )) ||\n        (!props.maxcharacter && props.maxlength && (\n          <span class={TEXTAREA_LIMIT.value}>{`${innerValue.value ? String(innerValue.value)?.length : 0}/${\n            props.maxlength\n          }`}</span>\n        ));\n\n      return (\n        <div class={textareaClasses.value} {...omit(attrs, ['style'])}>\n          <textarea\n            onInput={handleInput}\n            onCompositionstart={onCompositionstart}\n            onCompositionend={onCompositionend}\n            ref={refTextareaElem}\n            value={innerValue.value}\n            class={classes.value}\n            {...inputEvents}\n            {...inputAttrs.value}\n          ></textarea>\n          {textTips || limitText ? (\n            <div\n              class={[\n                `${name.value}__info_wrapper`,\n                {\n                  [`${name.value}__info_wrapper_align`]: !textTips,\n                },\n              ]}\n            >\n              {textTips}\n              {limitText}\n            </div>\n          ) : null}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["getValidAttrs","obj","newObj","Object","keys","forEach","key","isUndefined","defineComponent","name","inheritAttrs","props","_objectSpread","setup","attrs","_ref","expose","prefix","usePrefixClass","TEXTAREA_TIPS_CLASS","computed","concat","value","TEXTAREA_LIMIT","_toRefs","toRefs","modelValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","_slicedToArray","innerValue","setInnerValue","disabled","useFormDisabled","textareaStyle","ref","refTextareaElem","focused","isComposing","focus","_refTextareaElem$valu","blur","_refTextareaElem$valu2","adjustTextareaHeight","_refTextareaElem$valu3","_refTextareaElem$valu4","autosize","calcTextareaHeight","_typeof","_props2$autosize","minRows","maxRows","rows","height","minHeight","style","setInputValue","v","arguments","length","undefined","textareaElem","sV","String","inputValueChangeHandle","e","target","val","maxcharacter","stringInfo","getCharacterLength","characters","nextTick","handleInput","onCompositionstart","onCompositionend","eventDeal","_props2$_name","_name","toUpperCase","slice","emitKeyDown","emitKeyUp","emitKeypress","emitFocus","_props2$onFocus","onFocus","formItem","inject","FormItemInjectionKey","emitBlur","_props2$onBlur","onBlur","handleBlur","textareaClasses","_ref2","_defineProperty","readonly","inputAttrs","autofocus","placeholder","maxlength","characterNumber","characterInfo","watch","el","setStyle","merge","onMounted","renderTNodeJSX","useTNodeJSX","_String","inputEvents","onKeydown","onKeyup","onKeypress","_useCommonClassName","useCommonClassName","STATUS","classes","_ref3","status","tips","textTips","_createVNode","limitText","_mergeProps","omit"],"mappings":"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"}