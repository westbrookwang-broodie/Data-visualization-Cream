{"version":3,"file":"useSliderTooltip.mjs","sources":["../../../src/slider/hooks/useSliderTooltip.tsx"],"sourcesContent":["import { TooltipProps } from '@src/tooltip';\nimport { ref, computed, ComputedRef, Ref } from 'vue';\nimport { TdSliderProps } from '../type';\nimport { formatLabel } from '../util/common';\n\nconst initialProps: TooltipProps & { overlayClassName: string } = {\n  visible: false,\n  trigger: 'hover',\n  showArrow: true,\n  overlayInnerStyle: undefined,\n  overlayClassName: undefined,\n  attach: 'body',\n  theme: 'default',\n};\n\nexport interface TooltipConfig {\n  tooltipProps: boolean | TooltipProps;\n  vertical: boolean;\n  value: number;\n  label: TdSliderProps['label'];\n}\n\n/**\n * 聚合管理滑块tooltip内容hook\n * @param tooltipProps tooltip属性配置\n * @param vertical 是否垂直展示\n * @returns\n */\nexport const useSliderTooltip = (tooltipConfig: Ref<TooltipConfig>) => {\n  const tooltipRef = ref();\n  const showTooltip = computed({\n    get() {\n      return !tooltipConfig.value.tooltipProps === false;\n    },\n    set(val) {\n      return val;\n    },\n  });\n  const normalizeProps = ref<TooltipProps & { overlayClassName: string }>({ ...initialProps });\n  /** 开关显示tooltip */\n  const toggleTooltip = (toState: boolean) => {\n    if (!showTooltip.value) return;\n    normalizeProps.value.visible = toState;\n  };\n\n  /** 合并最终tooltip属性，以外部同名属性覆盖初始化属性 */\n  const validProps = computed(() => {\n    const { vertical, tooltipProps, label, value } = tooltipConfig.value;\n    const placement = vertical ? 'right' : 'top';\n    let content = formatLabel(label, value);\n    if (tooltipProps instanceof Object) {\n      if (!tooltipProps?.placement) {\n        normalizeProps.value.placement = placement;\n      }\n      if (tooltipProps.content) {\n        content = tooltipProps.content;\n      }\n      // @ts-ignore\n      return { ...normalizeProps.value, ...tooltipProps, content };\n    }\n    return { ...normalizeProps.value, placement, content };\n  });\n\n  return {\n    tooltipRef,\n    tooltipProps: validProps as ComputedRef<TdSliderProps['tooltipProps']>,\n    toggleTooltip,\n    showTooltip,\n  };\n};\n"],"names":["initialProps","visible","trigger","showArrow","overlayInnerStyle","overlayClassName","attach","theme","useSliderTooltip","tooltipConfig","tooltipRef","ref","showTooltip","computed","get","value","tooltipProps","set","val","normalizeProps","_objectSpread","toggleTooltip","toState","validProps","_tooltipConfig$value","vertical","label","placement","content","formatLabel","Object"],"mappings":";;;;;;;;;;;;;;;;;;;AAKA,IAAMA,YAA4D,GAAA;AAChEC,EAAAA,OAAS,EAAA,KAAA;AACTC,EAAAA,OAAS,EAAA,OAAA;AACTC,EAAAA,SAAW,EAAA,IAAA;EACXC,iBAAmB,EAAA,KAAA,CAAA;EACnBC,gBAAkB,EAAA,KAAA,CAAA;AAClBC,EAAAA,MAAQ,EAAA,MAAA;AACRC,EAAAA,KAAO,EAAA,SAAA;AACT,CAAA,CAAA;IAeaC,gBAAA,GAAmB,SAAnBA,gBAAAA,CAAoBC,aAAsC,EAAA;EACrE,IAAMC,aAAaC,GAAI,EAAA,CAAA;EACvB,IAAMC,cAAcC,QAAS,CAAA;IAC3BC,GAAM,EAAA,SAAAA,MAAA;AACG,MAAA,OAAA,CAACL,aAAc,CAAAM,KAAA,CAAMC,YAAiB,KAAA,KAAA,CAAA;KAC/C;IACAC,iBAAIC,CAAAA,GAAK,EAAA;AACA,MAAA,OAAAA,GAAA,CAAA;AACT,KAAA;AACF,GAAC,CAAA,CAAA;AACD,EAAA,IAAMC,cAAiB,GAAAR,GAAA,CAAAS,aAAA,CAAA,EAAA,EAAsDpB,aAAc,CAAA,CAAA;AAErF,EAAA,IAAAqB,aAAA,GAAgB,SAAhBA,aAAAA,CAAiBC,OAAqB,EAAA;AAC1C,IAAA,IAAI,CAACV,WAAY,CAAAG,KAAA,EAAO,OAAA;AACxBI,IAAAA,cAAA,CAAeJ,MAAMd,OAAU,GAAAqB,OAAA,CAAA;GACjC,CAAA;AAGM,EAAA,IAAAC,UAAA,GAAaV,SAAS,YAAM;AAChC,IAAA,IAAAW,oBAAA,GAAiDf,aAAc,CAAAM,KAAA;MAAvDU,QAAU,GAAAD,oBAAA,CAAVC,QAAU;MAAAT,YAAA,GAAAQ,oBAAA,CAAAR,YAAA;MAAcU,KAAO,GAAAF,oBAAA,CAAPE,KAAO;MAAAX,KAAA,GAAAS,oBAAA,CAAAT,KAAA,CAAA;AACjC,IAAA,IAAAY,SAAA,GAAYF,WAAW,OAAU,GAAA,KAAA,CAAA;AACnC,IAAA,IAAAG,OAAA,GAAUC,WAAY,CAAAH,KAAA,EAAOX,KAAK,CAAA,CAAA;IACtC,IAAIC,wBAAwBc,MAAQ,EAAA;MAC9B,IAAA,EAACd,iBAAAA,IAAAA,IAAAA,2BAAAA,aAAcW,SAAW,CAAA,EAAA;AAC5BR,QAAAA,cAAA,CAAeJ,MAAMY,SAAY,GAAAA,SAAA,CAAA;AACnC,OAAA;MACA,IAAIX,aAAaY,OAAS,EAAA;QACxBA,OAAA,GAAUZ,YAAa,CAAAY,OAAA,CAAA;AACzB,OAAA;MAEA,OAAAR,aAAA,CAAAA,aAAA,CAAAA,aAAA,KAAYD,cAAA,CAAeJ,KAAO,CAAA,EAAGC;AAAcY,QAAAA,OAAQ,EAARA,OAAAA;AAAQ,OAAA,CAAA,CAAA;AAC7D,KAAA;AACA,IAAA,OAAAR,aAAA,CAAAA,aAAA,CAAYD,EAAAA,EAAAA,cAAe,CAAAJ,KAAA,CAAA,EAAA,EAAA,EAAA;AAAOY,MAAAA,WAAAA;AAAWC,MAAAA,OAAQ,EAARA,OAAAA;AAAQ,KAAA,CAAA,CAAA;AACvD,GAAC,CAAA,CAAA;EAEM,OAAA;AACLlB,IAAAA,UAAA,EAAAA,UAAA;AACAM,IAAAA,YAAc,EAAAO,UAAA;AACdF,IAAAA,aAAA,EAAAA,aAAA;AACAT,IAAAA,WAAA,EAAAA,WAAAA;GACF,CAAA;AACF;;;;"}