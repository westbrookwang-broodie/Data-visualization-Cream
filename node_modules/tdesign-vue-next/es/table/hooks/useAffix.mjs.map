{"version":3,"file":"useAffix.mjs","sources":["../../../src/table/hooks/useAffix.ts"],"sourcesContent":["import isBoolean from 'lodash/isBoolean';\nimport { computed, ref, watch, onBeforeMount } from 'vue';\nimport { TdBaseTableProps } from '../type';\nimport { on, off } from '../../utils/dom';\nimport { AffixProps } from '../../affix';\n\n/**\n * 1. 表头吸顶（普通表头吸顶 和 虚拟滚动表头吸顶）\n * 2. 表尾吸底\n * 3. 底部滚动条吸底\n * 4. 分页器吸底\n */\nexport default function useAffix(props: TdBaseTableProps) {\n  const tableContentRef = ref<HTMLDivElement>();\n  // 吸顶表头\n  const affixHeaderRef = ref<HTMLDivElement>();\n  // 吸底表尾\n  const affixFooterRef = ref<HTMLDivElement>();\n  // 吸底滚动条\n  const horizontalScrollbarRef = ref<HTMLDivElement>();\n  // 吸底分页器\n  const paginationRef = ref<HTMLDivElement>();\n  // 当表格完全滚动消失在视野时，需要隐藏吸顶表头\n  const showAffixHeader = ref(true);\n  // 当表格完全滚动消失在视野时，需要隐藏吸底尾部\n  const showAffixFooter = ref(true);\n  // 当表格完全滚动消失在视野时，需要隐藏吸底分页器\n  const showAffixPagination = ref(true);\n\n  const isVirtualScroll = computed(\n    () => props.scroll && props.scroll.type === 'virtual' && (props.scroll.threshold || 100) < props.data.length,\n  );\n\n  const isAffixed = computed(\n    () => !!(props.headerAffixedTop || props.footerAffixedBottom || props.horizontalScrollAffixedBottom),\n  );\n\n  let lastScrollLeft = 0;\n  const onHorizontalScroll = (scrollElement?: HTMLElement) => {\n    if (!isAffixed.value && !isVirtualScroll.value) return;\n    let target = scrollElement;\n    if (!target && tableContentRef.value) {\n      lastScrollLeft = 0;\n      target = tableContentRef.value;\n    }\n    if (!target) return;\n    const left = target.scrollLeft;\n    // 如果 lastScrollLeft 等于 left，说明不是横向滚动，不需要更新横向滚动距离\n    if (lastScrollLeft === left) return;\n    lastScrollLeft = left;\n    // 表格内容、吸顶表头、吸底表尾、吸底横向滚动更新\n    const toUpdateScrollElement = [\n      tableContentRef.value,\n      affixHeaderRef.value,\n      affixFooterRef.value,\n      horizontalScrollbarRef.value,\n    ];\n    for (let i = 0, len = toUpdateScrollElement.length; i < len; i++) {\n      if (toUpdateScrollElement[i] && scrollElement !== toUpdateScrollElement[i]) {\n        toUpdateScrollElement[i].scrollLeft = left;\n      }\n    }\n  };\n\n  // 吸底的元素（footer、横向滚动条、分页器）是否显示\n  const isAffixedBottomElementShow = (elementRect: DOMRect, tableRect: DOMRect, headerHeight: number) =>\n    tableRect.top + headerHeight < elementRect.top && elementRect.top > elementRect.height;\n\n  const getOffsetTop = (props: boolean | AffixProps) => {\n    if (isBoolean(props)) return 0;\n    return props.offsetTop || 0;\n  };\n\n  const updateAffixHeaderOrFooter = () => {\n    if (!isAffixed.value && !isVirtualScroll.value) return;\n    const pos = tableContentRef.value?.getBoundingClientRect();\n    const headerRect = tableContentRef.value?.querySelector('thead')?.getBoundingClientRect();\n    const headerHeight = headerRect?.height || 0;\n    const footerRect = affixFooterRef.value?.getBoundingClientRect();\n    if ((props.headerAffixedTop || isVirtualScroll.value) && affixHeaderRef.value) {\n      const offsetTop = getOffsetTop(props.headerAffixProps || props.headerAffixedTop);\n      const footerHeight = footerRect?.height || 0;\n      let r = Math.abs(pos.top) < pos.height - headerHeight - offsetTop - footerHeight;\n      // 如果是虚拟滚动的表头，只要表头在可视区域内，一律永久显示（虚拟滚动表头 和 吸顶表头可能同时存在）\n      if (isVirtualScroll.value) {\n        r = pos.top > -1 * headerRect.height;\n      }\n      showAffixHeader.value = r;\n    }\n    // 底部内容吸底 和 底部滚动条吸底，不可能同时存在，二选一即可\n    if (props.footerAffixedBottom && affixFooterRef?.value) {\n      showAffixFooter.value = isAffixedBottomElementShow(footerRect, pos, headerHeight);\n    } else if (props.horizontalScrollAffixedBottom && horizontalScrollbarRef?.value) {\n      const horizontalScrollbarRect = horizontalScrollbarRef.value.getBoundingClientRect();\n      showAffixFooter.value = isAffixedBottomElementShow(horizontalScrollbarRect, pos, headerHeight);\n    }\n    if (props.paginationAffixedBottom && paginationRef.value) {\n      const pageRect = paginationRef.value.getBoundingClientRect();\n      showAffixPagination.value = isAffixedBottomElementShow(pageRect, pos, headerHeight);\n    }\n  };\n\n  const onDocumentScroll = () => {\n    updateAffixHeaderOrFooter();\n  };\n\n  const onFootScroll = () => {\n    onHorizontalScroll(affixFooterRef.value);\n  };\n\n  const onHeaderScroll = () => {\n    onHorizontalScroll(affixHeaderRef.value);\n  };\n\n  const horizontalScrollbarScroll = () => {\n    onHorizontalScroll(horizontalScrollbarRef.value);\n  };\n\n  const onTableContentScroll = () => {\n    onHorizontalScroll(tableContentRef.value);\n  };\n\n  const onFootMouseEnter = () => {\n    on(affixFooterRef.value, 'scroll', onFootScroll);\n  };\n\n  const onFootMouseLeave = () => {\n    off(affixFooterRef.value, 'scroll', onFootScroll);\n  };\n\n  const onHeaderMouseEnter = () => {\n    on(affixHeaderRef.value, 'scroll', onHeaderScroll);\n  };\n\n  const onHeaderMouseLeave = () => {\n    off(affixHeaderRef.value, 'scroll', onHeaderScroll);\n  };\n\n  const onScrollbarMouseEnter = () => {\n    on(horizontalScrollbarRef.value, 'scroll', horizontalScrollbarScroll);\n  };\n\n  const onScrollbarMouseLeave = () => {\n    off(horizontalScrollbarRef.value, 'scroll', horizontalScrollbarScroll);\n  };\n\n  const onTableContentMouseEnter = () => {\n    on(tableContentRef.value, 'scroll', onTableContentScroll);\n  };\n\n  const onTableContentMouseLeave = () => {\n    off(tableContentRef.value, 'scroll', onTableContentScroll);\n  };\n\n  const addHorizontalScrollListeners = () => {\n    if (affixHeaderRef.value) {\n      on(affixHeaderRef.value, 'mouseenter', onHeaderMouseEnter);\n      on(affixHeaderRef.value, 'mouseleave', onHeaderMouseLeave);\n    }\n\n    if (props.footerAffixedBottom && affixFooterRef.value) {\n      on(affixFooterRef.value, 'mouseenter', onFootMouseEnter);\n      on(affixFooterRef.value, 'mouseleave', onFootMouseLeave);\n    }\n\n    if (props.horizontalScrollAffixedBottom && horizontalScrollbarRef.value) {\n      on(horizontalScrollbarRef.value, 'mouseenter', onScrollbarMouseEnter);\n      on(horizontalScrollbarRef.value, 'mouseleave', onScrollbarMouseLeave);\n    }\n\n    if ((isAffixed.value || isVirtualScroll.value) && tableContentRef.value) {\n      on(tableContentRef.value, 'mouseenter', onTableContentMouseEnter);\n      on(tableContentRef.value, 'mouseleave', onTableContentMouseLeave);\n    }\n  };\n\n  const removeHorizontalScrollListeners = () => {\n    if (affixHeaderRef.value) {\n      off(affixHeaderRef.value, 'mouseenter', onHeaderMouseEnter);\n      off(affixHeaderRef.value, 'mouseleave', onHeaderMouseLeave);\n    }\n    if (affixFooterRef.value) {\n      off(affixFooterRef.value, 'mouseenter', onFootMouseEnter);\n      off(affixFooterRef.value, 'mouseleave', onFootMouseLeave);\n    }\n    if (tableContentRef.value) {\n      off(tableContentRef.value, 'mouseenter', onTableContentMouseEnter);\n      off(tableContentRef.value, 'mouseleave', onTableContentMouseLeave);\n    }\n    if (horizontalScrollbarRef.value) {\n      off(horizontalScrollbarRef.value, 'mouseenter', onScrollbarMouseEnter);\n      off(horizontalScrollbarRef.value, 'mouseleave', onScrollbarMouseLeave);\n    }\n  };\n\n  const addVerticalScrollListener = () => {\n    if (!isAffixed.value && !props.paginationAffixedBottom) return;\n    const timer = setTimeout(() => {\n      if (isAffixed.value || props.paginationAffixedBottom) {\n        on(document, 'scroll', onDocumentScroll);\n      } else {\n        off(document, 'scroll', onDocumentScroll);\n      }\n      clearTimeout(timer);\n    });\n  };\n\n  watch([affixHeaderRef, affixFooterRef, horizontalScrollbarRef, tableContentRef], () => {\n    addHorizontalScrollListeners();\n    onHorizontalScroll();\n    updateAffixHeaderOrFooter();\n  });\n\n  watch(isAffixed, addVerticalScrollListener);\n\n  watch(\n    () => [\n      props.data,\n      props.columns,\n      props.headerAffixedTop,\n      props.footerAffixedBottom,\n      props.horizontalScrollAffixedBottom,\n    ],\n    () => {\n      onHorizontalScroll();\n    },\n  );\n\n  onBeforeMount(() => {\n    off(document, 'scroll', onDocumentScroll);\n    removeHorizontalScrollListeners();\n  });\n\n  const setTableContentRef = (tableContent: HTMLDivElement) => {\n    tableContentRef.value = tableContent;\n    addVerticalScrollListener();\n  };\n\n  return {\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  };\n}\n"],"names":["useAffix","props","tableContentRef","ref","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","isVirtualScroll","computed","scroll","type","threshold","data","length","isAffixed","headerAffixedTop","footerAffixedBottom","horizontalScrollAffixedBottom","lastScrollLeft","onHorizontalScroll","scrollElement","value","target","left","scrollLeft","toUpdateScrollElement","i","len","isAffixedBottomElementShow","elementRect","tableRect","headerHeight","top","height","getOffsetTop","isBoolean","offsetTop","updateAffixHeaderOrFooter","_tableContentRef$valu","_tableContentRef$valu2","_tableContentRef$valu3","_affixFooterRef$value","pos","getBoundingClientRect","headerRect","querySelector","footerRect","headerAffixProps","footerHeight","r","Math","abs","horizontalScrollbarRect","paginationAffixedBottom","pageRect","onDocumentScroll","onFootScroll","onHeaderScroll","horizontalScrollbarScroll","onTableContentScroll","onFootMouseEnter","on","onFootMouseLeave","off","onHeaderMouseEnter","onHeaderMouseLeave","onScrollbarMouseEnter","onScrollbarMouseLeave","onTableContentMouseEnter","onTableContentMouseLeave","addHorizontalScrollListeners","removeHorizontalScrollListeners","addVerticalScrollListener","timer","setTimeout","document","clearTimeout","watch","columns","onBeforeMount","setTableContentRef","tableContent"],"mappings":"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"}